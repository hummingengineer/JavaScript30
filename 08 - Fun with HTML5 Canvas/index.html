<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>HTML5 Canvas</title>
  </head>

  <body>

    <canvas id="draw" width="800" height="800"/>

    <script>
      const canvas = document.querySelector('#draw')
      // You don't draw directly on the canvas element in HTML, but you draw on something called the context.
      const ctx = canvas.getContext('2d')

      // We need to do is size up our canvas to be the exact width of the window. We want to resize it before we do any of our drawings.
      // It should be as big as the actual window is.
      canvas.width = window.innerWidth
      canvas.height = window.innerHeight
      
      // 선 색 지정
      ctx.strokeStyle = '#BADA55'
      // 선이 만나는 지점의 모양을 지정
      ctx.lineJoin = 'round'
      // 선의 끝모양을 지정
      ctx.lineCap = 'round'

      // When you click down, we set it to true.
      // And when you click up, you let go off the button, we're going to set it to false.
      // It means that we actually draw to this canvas, or is someone moving their mouse without doing anything.
      let isDrawing = false
      // If set like this, we always start from 0, and go to wherever the user's mouse is actually moving.
      let lastX = 0
      let lastY = 0

      // draw function is going to be called whenever I move my mouse on top of the canvas.
      // But we want to only do it when the person has clicked down.
      function draw(e) {
        if (!isDrawing) return  // stop the function from running when they are not moused down.
        ctx.beginPath()
        // Start from
        ctx.moveTo(lastX, lastY)
        // Go to
        ctx.lineTo(e.offsetX, e.offsetY)
        ctx.stroke()
        // We want to update the lastX and the lastY variables to be wherever they were.
        lastX = e.offsetX
        lastY = e.offsetY
      }

      // We'll listen for our mousemove event on the canvas.
      // When you move your mouse on the canvas, draw function will activate.
      canvas.addEventListener('mousemove', draw)
      canvas.addEventListener('mousedown', () => isDrawing = true)
      canvas.addEventListener('mouseup', () => isDrawing = false)
      // When you click down, let your mouse leave the actual window here and let go and come back, and it's still going to think that the mouse is down because you never triggered a mouseup on that event.
      // 화면 밖으로 마우스가 나갔을 때를 위해 필요하다
      // When you mouse out it's going to automatically say, "you're no longer drawing"
      canvas.addEventListener('mouseout', () => isDrawing = false)

    </script>

    <style>
      html, body {
        margin: 0;
      }
    </style>

  </body>

</html>
